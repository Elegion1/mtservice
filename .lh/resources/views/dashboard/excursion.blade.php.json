{
    "sourceFile": "resources/views/dashboard/excursion.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 26,
            "patches": [
                {
                    "date": 1718905248231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1718905255171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,9 @@\n                             <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <in id=\"edit-current-images\">\n+                            <input type=\"file\" id=\"edit-current-images\">\n                                 <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n                             </div>\n                         </div>\n                         <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n"
                },
                {
                    "date": 1718905262673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,222 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <input type=\"file\" id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                    'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1718905268535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -219,227 +219,4 @@\n \n         });\n     </script>\n </x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <input type=\"file\" id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                            </div>\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                    'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n"
                },
                {
                    "date": 1718905274467,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,222 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <input type=\"file\" id=\"edit-current-images\" multiple>\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                    'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1718905291963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,223 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                    'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1718905320908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,10 +185,10 @@\n                     modal.show();\n                 });\n             });\n \n+            \n             // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n             document.getElementById('edit-current-images').addEventListener('click', (event) => {\n                 if (event.target.classList.contains('remove-image')) {\n                     const imageId = event.target.getAttribute('data-image-id');\n \n@@ -220,448 +220,4 @@\n \n         });\n     </script>\n </x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <input type=\"file\" id=\"edit-current-images\" multiple>\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                    'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <input type=\"file\" id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                    'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n"
                },
                {
                    "date": 1718905402241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,10 +185,10 @@\n                     modal.show();\n                 });\n             });\n \n-            \n             // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n             document.getElementById('edit-current-images').addEventListener('click', (event) => {\n                 if (event.target.classList.contains('remove-image')) {\n                     const imageId = event.target.getAttribute('data-image-id');\n \n"
                },
                {
                    "date": 1718905414402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,8 +131,9 @@\n                             <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <input type=\"text\">\n                             <div id=\"edit-current-images\">\n                                 <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1718905429032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,9 @@\n                             <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <input type=\"text\">\n+                            <input type=\"file\" class=\"form-control\">\n                             <div id=\"edit-current-images\">\n                                 <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1718905723582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -130,10 +130,13 @@\n                             <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n                             <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <input type=\"file\" class=\"form-control\">\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n+                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n                             <div id=\"edit-current-images\">\n                                 <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n                             </div>\n                         </div>\n"
                },
                {
                    "date": 1719228743048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,15 +184,15 @@\n                     showCurrentImages(excursion.images);\n \n                     // Mostra il modale di modifica\n                     const modal = new bootstrap.Modal(document.getElementById(\n-                    'editExcursionModal'));\n+                        'editExcursionModal'));\n                     modal.show();\n                 });\n             });\n \n+            \n             // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n             document.getElementById('edit-current-images').addEventListener('click', (event) => {\n                 if (event.target.classList.contains('remove-image')) {\n                     const imageId = event.target.getAttribute('data-image-id');\n \n"
                },
                {
                    "date": 1719400029168,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,228 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Descrizione</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n+                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                        'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            \n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1719400036506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n                     <th>Prezzo</th>\n                     <th>Incremento Prezzo</th>\n                     <th>Abstract</th>\n                     <th>Descrizione</th>\n-                    <th>Descrizione</th>\n+                    <th>Durata</th>\n                     <th>Data di aggiunta</th>\n                     <th>Data di modifica</th>\n                     <th>Immagini</th>\n                     <th>Azione</th>\n@@ -69,234 +69,8 @@\n                         <td>{{ $excursion->price }} €</td>\n                         <td>{{ $excursion->price_increment }} €</td>\n                         <td>{{ $excursion->abstract }}</td>\n                         <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n-                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <div id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                            </div>\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                        'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            \n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n                         <td>{{ $excursion->description }}</td>\n                         <td>{{ $excursion->created_at }}</td>\n                         <td>{{ $excursion->updated_at }}</td>\n                         <td>\n"
                },
                {
                    "date": 1719400043918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,229 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Durata</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->duration }} </td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n+                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                        'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            \n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1719400087893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n                         <td>{{ $excursion->price }} €</td>\n                         <td>{{ $excursion->price_increment }} €</td>\n                         <td>{{ $excursion->abstract }}</td>\n                         <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->duration }} </td>\n+                        <td>{{ $excursion->duration }} h</td>\n                         <td>{{ $excursion->created_at }}</td>\n                         <td>{{ $excursion->updated_at }}</td>\n                         <td>\n                             @if ($excursion->images->count() > 0)\n@@ -123,8 +123,9 @@\n                             <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                             <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n                                 name=\"price_increment\" required>\n                         </div>\n+                        \n                         <div class=\"mb-3\">\n                             <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n                         </div>\n@@ -226,233 +227,4 @@\n \n         });\n     </script>\n </x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Durata</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n-                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <div id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                            </div>\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                        'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            \n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n"
                },
                {
                    "date": 1719400111259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,10 +123,13 @@\n                             <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                             <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n                                 name=\"price_increment\" required>\n                         </div>\n-                        \n                         <div class=\"mb-3\">\n+                            <label for=\"edit_duration\" class=\"form-label\">duration</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_duration\" name=\"duration\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n                             <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n                         </div>\n                         <div class=\"mb-3\">\n"
                },
                {
                    "date": 1719400119128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n                             <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n                                 name=\"price_increment\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_duration\" class=\"form-label\">duration</label>\n+                            <label for=\"edit_duration\" class=\"form-label\">Durata</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_duration\" name=\"duration\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n"
                },
                {
                    "date": 1719400138473,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,8 +184,9 @@\n                     form.querySelector('#edit_price').value = excursion.price;\n                     form.querySelector('#edit_price_increment').value = excursion.price_increment;\n                     form.querySelector('#edit_abstract').value = excursion.abstract;\n                     form.querySelector('#edit_description').value = excursion.description;\n+                    \n \n                     // Mostra le immagini esistenti nel modale di modifica\n                     showCurrentImages(excursion.images);\n \n"
                },
                {
                    "date": 1719400162071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -184,9 +184,9 @@\n                     form.querySelector('#edit_price').value = excursion.price;\n                     form.querySelector('#edit_price_increment').value = excursion.price_increment;\n                     form.querySelector('#edit_abstract').value = excursion.abstract;\n                     form.querySelector('#edit_description').value = excursion.description;\n-                    \n+                    form.querySelector('#edit_duration').value = excursion.duration;\n \n                     // Mostra le immagini esistenti nel modale di modifica\n                     showCurrentImages(excursion.images);\n \n"
                },
                {
                    "date": 1719400193239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,8 +29,12 @@\n                     <label for=\"abstract\" class=\"form-label\">Abstract</label>\n                     <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n                     <label for=\"description\" class=\"form-label\">Descrizione</label>\n                     <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n                 </div>\n             </div>\n"
                },
                {
                    "date": 1719400199035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,238 @@\n+<x-dashboard-layout>\n+    <div class=\"container-fluid mt-5\">\n+        <h1>Gestione Escursioni</h1>\n+\n+        @if (session('success'))\n+            <div class=\"alert alert-success\">\n+                {{ session('success') }}\n+            </div>\n+        @endif\n+\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+            @csrf\n+            <div class=\"row\">\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                </div>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"\" class=\"form-label\"></label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"\" name=\"\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n+            </div>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+        </form>\n+\n+        <hr>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n+        <table class=\"table\">\n+            <thead>\n+                <tr>\n+                    <th>#</th>\n+                    <th>Nome</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n+                    <th>Durata</th>\n+                    <th>Data di aggiunta</th>\n+                    <th>Data di modifica</th>\n+                    <th>Immagini</th>\n+                    <th>Azione</th>\n+                </tr>\n+            </thead>\n+            <tbody>\n+                @foreach ($excursions as $excursion)\n+                    <tr>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->duration }} h</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n+                        </td>\n+                        <td>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                                style=\"display:inline-block;\">\n+                                @csrf\n+                                @method('DELETE')\n+                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n+                            </form>\n+                        </td>\n+                    </tr>\n+                @endforeach\n+            </tbody>\n+        </table>\n+    </div>\n+\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+        aria-hidden=\"true\">\n+        <div class=\"modal-dialog\">\n+            <div class=\"modal-content\">\n+                <div class=\"modal-header\">\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n+                </div>\n+                <div class=\"modal-body\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                        @csrf\n+                        @method('PUT')\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_duration\" class=\"form-label\">Durata</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_duration\" name=\"duration\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n+                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n+                        </div>\n+                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n+                    </form>\n+                </div>\n+            </div>\n+        </div>\n+    </div>\n+\n+    <!-- JavaScript per gestire il modale di modifica -->\n+    <script>\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n+\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n+\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n+                    form.querySelector('#edit_duration').value = excursion.duration;\n+\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                        'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            \n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n+                }\n+            });\n+\n+        });\n+    </script>\n+</x-dashboard-layout>\n"
                },
                {
                    "date": 1719400209951,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,10 +25,10 @@\n                     <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n                         name=\"price_increment\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n-                    <label for=\"\" class=\"form-label\"></label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"\" name=\"\" required>\n+                    <label for=\"duration\" class=\"form-label\">Durata</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"duration\" name=\"duration\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n                     <label for=\"abstract\" class=\"form-label\">Abstract</label>\n                     <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n@@ -235,242 +235,4 @@\n \n         });\n     </script>\n </x-dashboard-layout>\n-<x-dashboard-layout>\n-    <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n-\n-        @if (session('success'))\n-            <div class=\"alert alert-success\">\n-                {{ session('success') }}\n-            </div>\n-        @endif\n-\n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n-            @csrf\n-            <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n-                </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n-            </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n-        </form>\n-\n-        <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n-        <table class=\"table\">\n-            <thead>\n-                <tr>\n-                    <th>#</th>\n-                    <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n-                    <th>Durata</th>\n-                    <th>Data di aggiunta</th>\n-                    <th>Data di modifica</th>\n-                    <th>Immagini</th>\n-                    <th>Azione</th>\n-                </tr>\n-            </thead>\n-            <tbody>\n-                @foreach ($excursions as $excursion)\n-                    <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->duration }} h</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n-                        <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n-                            @else\n-                                <small>Nessuna immagine</small>\n-                            @endif\n-                        </td>\n-                        <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n-                                style=\"display:inline-block;\">\n-                                @csrf\n-                                @method('DELETE')\n-                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n-                            </form>\n-                        </td>\n-                    </tr>\n-                @endforeach\n-            </tbody>\n-        </table>\n-    </div>\n-\n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n-        aria-hidden=\"true\">\n-        <div class=\"modal-dialog\">\n-            <div class=\"modal-content\">\n-                <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n-                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n-                </div>\n-                <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n-                        @csrf\n-                        @method('PUT')\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_duration\" class=\"form-label\">Durata</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_duration\" name=\"duration\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n-                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <div id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                            </div>\n-                        </div>\n-                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n-                    </form>\n-                </div>\n-            </div>\n-        </div>\n-    </div>\n-\n-    <!-- JavaScript per gestire il modale di modifica -->\n-    <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n-\n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n-\n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n-\n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n-                    form.querySelector('#edit_duration').value = excursion.duration;\n-\n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                        'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            \n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n-                }\n-            });\n-\n-        });\n-    </script>\n-</x-dashboard-layout>\n"
                },
                {
                    "date": 1719400227121,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n                 <div class=\"mb-3 col-2\">\n                     <label for=\"price\" class=\"form-label\">Prezzo</label>\n                     <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n                 </div>\n-                <div class=\"mb-3 col-2\">\n+                <div class=\"mb-3 col-1\">\n                     <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                     <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n                         name=\"price_increment\" required>\n                 </div>\n"
                },
                {
                    "date": 1719400233764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n                     <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                     <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n                         name=\"price_increment\" required>\n                 </div>\n-                <div class=\"mb-3 col-12\">\n+                <div class=\"mb-3 col-1\">\n                     <label for=\"duration\" class=\"form-label\">Durata</label>\n                     <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"duration\" name=\"duration\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n"
                },
                {
                    "date": 1719400245125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n                 <div class=\"mb-3 col-8\">\n                     <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n                     <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                 </div>\n-                <div class=\"mb-3 col-2\">\n+                <div class=\"mb-3 col-1\">\n                     <label for=\"price\" class=\"form-label\">Prezzo</label>\n                     <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n                 </div>\n                 <div class=\"mb-3 col-1\">\n"
                },
                {
                    "date": 1719840229746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,35 +13,35 @@\n             @csrf\n             <div class=\"row\">\n                 <div class=\"mb-3 col-8\">\n                     <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n+                    <input type=\"text\" class=\"form-control form_input_focused\" id=\"name\" name=\"name\" required>\n                 </div>\n                 <div class=\"mb-3 col-1\">\n                     <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"price\" name=\"price\" required>\n                 </div>\n-                <div class=\"mb-3 col-1\">\n+                <div class=\"mb-3 col-2\">\n                     <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"price_increment\"\n                         name=\"price_increment\" required>\n                 </div>\n                 <div class=\"mb-3 col-1\">\n                     <label for=\"duration\" class=\"form-label\">Durata</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"duration\" name=\"duration\" required>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"duration\" name=\"duration\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n                     <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"abstract\" name=\"abstract\" required>\n                 </div>\n                 <div class=\"mb-3 col-12\">\n                     <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                    <textarea class=\"form-control form_input_focused\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n                 </div>\n             </div>\n             <div class=\"mb-3\">\n                 <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+                <input type=\"file\" class=\"form-control form_input_focused\" id=\"images\" name=\"images[]\" multiple>\n             </div>\n             <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n         </form>\n \n@@ -115,35 +115,35 @@\n                         @csrf\n                         @method('PUT')\n                         <div class=\"mb-3\">\n                             <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n+                            <input type=\"text\" class=\"form-control form_input_focused\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"edit_price\" name=\"price\"\n                                 required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control form_input_focused\" id=\"edit_price_increment\"\n                                 name=\"price_increment\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_duration\" class=\"form-label\">Durata</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_duration\" name=\"duration\" required>\n+                            <input type=\"text\" class=\"form-control form_input_focused\" id=\"edit_duration\" name=\"duration\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                            <input type=\"text\" class=\"form-control form_input_focused\" id=\"edit_abstract\" name=\"abstract\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                            <textarea class=\"form-control form_input_focused\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n-                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n+                            <input type=\"file\" class=\"form-control form_input_focused\" id=\"edit_images\" name=\"images[]\" multiple>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n                             <div id=\"edit-current-images\">\n"
                }
            ],
            "date": 1718905248231,
            "name": "Commit-0",
            "content": "<x-dashboard-layout>\n    <div class=\"container-fluid mt-5\">\n        <h1>Gestione Escursioni</h1>\n\n        @if (session('success'))\n            <div class=\"alert alert-success\">\n                {{ session('success') }}\n            </div>\n        @endif\n\n        <!-- Form per aggiungere una nuova escursione -->\n        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n            @csrf\n            <div class=\"row\">\n                <div class=\"mb-3 col-8\">\n                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                </div>\n                <div class=\"mb-3 col-2\">\n                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n                </div>\n                <div class=\"mb-3 col-2\">\n                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n                        name=\"price_increment\" required>\n                </div>\n                <div class=\"mb-3 col-12\">\n                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n                </div>\n                <div class=\"mb-3 col-12\">\n                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n                </div>\n            </div>\n            <div class=\"mb-3\">\n                <label for=\"images\" class=\"form-label\">Immagini</label>\n                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n        </form>\n\n        <hr>\n\n        <!-- Tabella con tutte le escursioni -->\n        <h2>Tutte le Escursioni</h2>\n        <table class=\"table\">\n            <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Nome</th>\n                    <th>Prezzo</th>\n                    <th>Incremento Prezzo</th>\n                    <th>Abstract</th>\n                    <th>Descrizione</th>\n                    <th>Data di aggiunta</th>\n                    <th>Data di modifica</th>\n                    <th>Immagini</th>\n                    <th>Azione</th>\n                </tr>\n            </thead>\n            <tbody>\n                @foreach ($excursions as $excursion)\n                    <tr>\n                        <td>{{ $excursion->id }}</td>\n                        <td>{{ $excursion->name }}</td>\n                        <td>{{ $excursion->price }} €</td>\n                        <td>{{ $excursion->price_increment }} €</td>\n                        <td>{{ $excursion->abstract }}</td>\n                        <td>{{ $excursion->description }}</td>\n                        <td>{{ $excursion->created_at }}</td>\n                        <td>{{ $excursion->updated_at }}</td>\n                        <td>\n                            @if ($excursion->images->count() > 0)\n                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n                            @else\n                                <small>Nessuna immagine</small>\n                            @endif\n                        </td>\n                        <td>\n                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n                                data-bs-target=\"#editExcursionModal\"\n                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n                                style=\"display:inline-block;\">\n                                @csrf\n                                @method('DELETE')\n                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n                            </form>\n                        </td>\n                    </tr>\n                @endforeach\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Modale per Modifica Escursione -->\n    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n        aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n                        @csrf\n                        @method('PUT')\n                        <div class=\"mb-3\">\n                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n                                required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n                                name=\"price_increment\" required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_images\" class=\"form-label\">Immagini Caricate</label>\n                            <in id=\"edit-current-images\">\n                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n                            </div>\n                        </div>\n                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- JavaScript per gestire il modale di modifica -->\n    <script>\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n            function showCurrentImages(images) {\n                const currentImagesDiv = document.getElementById('edit-current-images');\n                currentImagesDiv.innerHTML = '';\n\n                images.forEach(image => {\n                    const imgDiv = document.createElement('div');\n                    imgDiv.classList.add('current-image');\n                    imgDiv.innerHTML = `\n                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\">\n                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n                    `;\n                    currentImagesDiv.appendChild(imgDiv);\n                });\n            }\n\n            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n                button.addEventListener('click', () => {\n                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n\n                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n                    const form = document.getElementById('editExcursionForm');\n                    form.action = `/dashboard/excursions/${excursion.id}`;\n                    form.querySelector('#edit_name').value = excursion.name;\n                    form.querySelector('#edit_price').value = excursion.price;\n                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n                    form.querySelector('#edit_abstract').value = excursion.abstract;\n                    form.querySelector('#edit_description').value = excursion.description;\n\n                    // Mostra le immagini esistenti nel modale di modifica\n                    showCurrentImages(excursion.images);\n\n                    // Mostra il modale di modifica\n                    const modal = new bootstrap.Modal(document.getElementById(\n                    'editExcursionModal'));\n                    modal.show();\n                });\n            });\n\n            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n                if (event.target.classList.contains('remove-image')) {\n                    const imageId = event.target.getAttribute('data-image-id');\n\n                    // Invia una richiesta DELETE al server per eliminare l'immagine\n                    fetch(`/dashboard/images/${imageId}`, {\n                            method: 'DELETE',\n                            headers: {\n                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n                            }\n                        })\n                        .then(response => response.json())\n                        .then(data => {\n                            if (data.success) {\n                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n                                event.target.closest('.current-image').remove();\n                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n                            } else {\n                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n                                console.error(data.error);\n                            }\n                        })\n                        .catch(error => {\n                            console.error(\n                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n                                error);\n                        });\n                }\n            });\n\n        });\n    </script>\n</x-dashboard-layout>\n"
        }
    ]
}