{
    "sourceFile": "resources/views/dashboard/partner.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 15,
            "patches": [
                {
                    "date": 1719227181506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1719227416197,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,10 +15,10 @@\n                     <label for=\"name\" class=\"form-label\">Nome Partner</label>\n                     <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                 </div>\n                 <div class=\"mb-3 col-4\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"description\" name=\"description\" required>\n+                    <label for=\"link\" class=\"form-label\">Descrizione</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"link\" name=\"link\" required>\n                 </div>\n                 <div class=\"mb-3 col-4\">\n                     <label for=\"images\" class=\"form-label\">Immagini</label>\n                     <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n@@ -44,20 +44,22 @@\n                 @foreach ($partners as $partner)\n                     <tr>\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n-                        <td>{{ $partner->description }}</td>\n+                        <td>{{ $partner->link }}</td>\n                         <td>\n                             @foreach ($partner->images as $image)\n-                                <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\" height=\"50\">\n+                                <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\"\n+                                    height=\"50\">\n                             @endforeach\n                         </td>\n                         <td>{{ $partner->created_at }}</td>\n                         <td>{{ $partner->updated_at }}</td>\n                         <td>\n                             <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n                                 data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n-                                data-name=\"{{ $partner->name }}\" data-description=\"{{ $partner->description }}\">Modifica</button>\n+                                data-name=\"{{ $partner->name }}\"\n+                                data-link=\"{{ $partner->link }}\">Modifica</button>\n                             <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n                                 style=\"display:inline-block;\">\n                                 @csrf\n                                 @method('DELETE')\n@@ -87,10 +89,11 @@\n                             <label for=\"edit_name\" class=\"form-label\">Nome Partner</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_description\" name=\"description\" required>\n+                            <label for=\"edit_link\" class=\"form-label\">Descrizione</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\"\n+                                required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n                             <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n@@ -108,16 +111,16 @@\n             editPartnerModal.addEventListener('show.bs.modal', function(event) {\n                 var button = event.relatedTarget;\n                 var id = button.getAttribute('data-id');\n                 var name = button.getAttribute('data-name');\n-                var description = button.getAttribute('data-description');\n+                var link = button.getAttribute('data-link');\n \n                 var modal = this;\n                 modal.querySelector('#edit_name').value = name;\n-                modal.querySelector('#edit_description').value = description;\n+                modal.querySelector('#edit_link').value = link;\n \n                 var form = modal.querySelector('#editPartnerForm');\n-                form.action = '{{ url(\"dashboard/partners\") }}/' + id;\n+                form.action = '{{ url('dashboard/partners') }}/' + id;\n             });\n         });\n     </script>\n </x-dashboard-layout>\n"
                },
                {
                    "date": 1719227456316,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,9 @@\n                             <label for=\"edit_name\" class=\"form-label\">Nome Partner</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_link\" class=\"form-label\">Descrizione</label>\n+                            <label for=\"edit_link\" class=\"form-label\">Link</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\"\n                                 required>\n                         </div>\n                         <div class=\"mb-3\">\n"
                },
                {
                    "date": 1719227468893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n             <thead>\n                 <tr>\n                     <th>#</th>\n                     <th>Nome</th>\n-                    <th>Descrizione</th>\n+                    <th>Link</th>\n                     <th>Immagini</th>\n                     <th>Data di aggiunta</th>\n                     <th>Data di modifica</th>\n                     <th>Azione</th>\n"
                },
                {
                    "date": 1719227529802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n                 @foreach ($partners as $partner)\n                     <tr>\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n-                        <td>{{ $partner->link }}</td>\n+                        <td><a href=\"\"></a>{{ $partner->link }}</td>\n                         <td>\n                             @foreach ($partner->images as $image)\n                                 <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\"\n                                     height=\"50\">\n"
                },
                {
                    "date": 1719227536216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n                 @foreach ($partners as $partner)\n                     <tr>\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n-                        <td><a href=\"\"></a>{{ $partner->link }}</td>\n+                        <td><a href=\"{{ $partner->link }}\"></a>{{ $partner->link }}</td>\n                         <td>\n                             @foreach ($partner->images as $image)\n                                 <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\"\n                                     height=\"50\">\n"
                },
                {
                    "date": 1719227546699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n                 @foreach ($partners as $partner)\n                     <tr>\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n-                        <td><a href=\"{{ $partner->link }}\"></a>{{ $partner->link }}</td>\n+                        <td><a href=\"{{ $partner->link }}\">{{ $partner->link }}</a></td>\n                         <td>\n                             @foreach ($partner->images as $image)\n                                 <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\"\n                                     height=\"50\">\n"
                },
                {
                    "date": 1719227562602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n                     <label for=\"name\" class=\"form-label\">Nome Partner</label>\n                     <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                 </div>\n                 <div class=\"mb-3 col-4\">\n-                    <label for=\"link\" class=\"form-label\">Descrizione</label>\n+                    <label for=\"link\" class=\"form-label\">Link</label>\n                     <input type=\"text\" class=\"form-control\" id=\"link\" name=\"link\" required>\n                 </div>\n                 <div class=\"mb-3 col-4\">\n                     <label for=\"images\" class=\"form-label\">Immagini</label>\n"
                },
                {
                    "date": 1719227600168,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,12 +46,13 @@\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n                         <td><a href=\"{{ $partner->link }}\">{{ $partner->link }}</a></td>\n                         <td>\n-                            @foreach ($partner->images as $image)\n-                                <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\"\n-                                    height=\"50\">\n-                            @endforeach\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @else\n+                                <small>Nessuna immagine</small>\n+                            @endif\n                         </td>\n                         <td>{{ $partner->created_at }}</td>\n                         <td>{{ $partner->updated_at }}</td>\n                         <td>\n"
                },
                {
                    "date": 1719227608068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n                         <td><a href=\"{{ $partner->link }}\">{{ $partner->link }}</a></td>\n                         <td>\n-                            @if ($excursion->images->count() > 0)\n+                            @if ($partner->images->count() > 0)\n                                 <small>{{ $excursion->images->count() }} immagini caricate</small>\n                             @else\n                                 <small>Nessuna immagine</small>\n                             @endif\n"
                },
                {
                    "date": 1719227984332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,12 +44,12 @@\n                 @foreach ($partners as $partner)\n                     <tr>\n                         <td>{{ $partner->id }}</td>\n                         <td>{{ $partner->name }}</td>\n-                        <td><a href=\"{{ $partner->link }}\">{{ $partner->link }}</a></td>\n+                        <td><a href=\"{{ $partner->link }}\" target=\"_blank\">{{ $partner->link }}</a></td>\n                         <td>\n                             @if ($partner->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                                <small>{{ $partner->images->count() }} immagini caricate</small>\n                             @else\n                                 <small>Nessuna immagine</small>\n                             @endif\n                         </td>\n@@ -58,9 +58,10 @@\n                         <td>\n                             <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n                                 data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n                                 data-name=\"{{ $partner->name }}\"\n-                                data-link=\"{{ $partner->link }}\">Modifica</button>\n+                                data-link=\"{{ $partner->link }}\"\n+                                data-images=\"{{ $partner->images }}\">Modifica</button>\n                             <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n                                 style=\"display:inline-block;\">\n                                 @csrf\n                                 @method('DELETE')\n@@ -91,15 +92,17 @@\n                             <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_link\" class=\"form-label\">Link</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\"\n-                                required>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\" required>\n                         </div>\n                         <div class=\"mb-3\">\n                             <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n                             <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n                         </div>\n+                        <div id=\"edit_images_preview\" class=\"mb-3\">\n+                            <!-- Anteprime delle immagini caricate verranno inserite qui -->\n+                        </div>\n                         <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                     </form>\n                 </div>\n             </div>\n@@ -113,15 +116,56 @@\n                 var button = event.relatedTarget;\n                 var id = button.getAttribute('data-id');\n                 var name = button.getAttribute('data-name');\n                 var link = button.getAttribute('data-link');\n+                var images = JSON.parse(button.getAttribute('data-images').replace(/&quot;/g, '\"'));\n \n                 var modal = this;\n                 modal.querySelector('#edit_name').value = name;\n                 modal.querySelector('#edit_link').value = link;\n \n                 var form = modal.querySelector('#editPartnerForm');\n-                form.action = '{{ url('dashboard/partners') }}/' + id;\n+                form.action = '{{ url('partners') }}/' + id;\n+\n+                var previewContainer = modal.querySelector('#edit_images_preview');\n+                previewContainer.innerHTML = '';\n+\n+                if (images.length > 0) {\n+                    images.forEach(function(image) {\n+                        var imgElement = document.createElement('div');\n+                        imgElement.className = 'd-inline-block position-relative';\n+                        imgElement.innerHTML = `\n+                            <img src=\"{{ Storage::url('') }}${image.path}\" alt=\"image\" width=\"100\" class=\"img-thumbnail m-1\">\n+                            <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0\"\n+                                onclick=\"deleteImage(${image.id}, this)\">×</button>\n+                        `;\n+                        previewContainer.appendChild(imgElement);\n+                    });\n+                }\n             });\n         });\n+\n+        function deleteImage(imageId, button) {\n+            if (confirm('Sei sicuro di voler eliminare questa immagine?')) {\n+                fetch('{{ url('images') }}/' + imageId, {\n+                    method: 'DELETE',\n+                    headers: {\n+                        'X-CSRF-TOKEN': '{{ csrf_token() }}',\n+                        'Content-Type': 'application/json'\n+                    }\n+                })\n+                .then(response => response.json())\n+                .then(data => {\n+                    if (data.success) {\n+                        button.parentElement.remove();\n+                    } else {\n+                        alert('Errore nell\\'eliminazione dell\\'immagine.');\n+                    }\n+                })\n+                .catch(error => {\n+                    console.error('Errore:', error);\n+                    alert('Errore nell\\'eliminazione dell\\'immagine.');\n+                });\n+            }\n+        }\n     </script>\n </x-dashboard-layout>\n"
                },
                {
                    "date": 1719228241097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,68 +1,89 @@\n <x-dashboard-layout>\n     <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Partner</h1>\n+        <h1>Gestione Escursioni</h1>\n \n         @if (session('success'))\n             <div class=\"alert alert-success\">\n                 {{ session('success') }}\n             </div>\n         @endif\n \n-        <form action=\"{{ route('partners.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+        <!-- Form per aggiungere una nuova escursione -->\n+        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n             @csrf\n             <div class=\"row\">\n-                <div class=\"mb-3 col-4\">\n-                    <label for=\"name\" class=\"form-label\">Nome Partner</label>\n+                <div class=\"mb-3 col-8\">\n+                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n                     <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                 </div>\n-                <div class=\"mb-3 col-4\">\n-                    <label for=\"link\" class=\"form-label\">Link</label>\n-                    <input type=\"text\" class=\"form-control\" id=\"link\" name=\"link\" required>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n                 </div>\n-                <div class=\"mb-3 col-4\">\n-                    <label for=\"images\" class=\"form-label\">Immagini</label>\n-                    <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+                <div class=\"mb-3 col-2\">\n+                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n+                        name=\"price_increment\" required>\n                 </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n+                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n+                </div>\n+                <div class=\"mb-3 col-12\">\n+                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n+                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n+                </div>\n             </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Partner</button>\n+            <div class=\"mb-3\">\n+                <label for=\"images\" class=\"form-label\">Immagini</label>\n+                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n+            </div>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n         </form>\n+\n         <hr>\n-        <h2>Tutti i Partner</h2>\n+\n+        <!-- Tabella con tutte le escursioni -->\n+        <h2>Tutte le Escursioni</h2>\n         <table class=\"table\">\n             <thead>\n                 <tr>\n                     <th>#</th>\n                     <th>Nome</th>\n-                    <th>Link</th>\n-                    <th>Immagini</th>\n+                    <th>Prezzo</th>\n+                    <th>Incremento Prezzo</th>\n+                    <th>Abstract</th>\n+                    <th>Descrizione</th>\n                     <th>Data di aggiunta</th>\n                     <th>Data di modifica</th>\n+                    <th>Immagini</th>\n                     <th>Azione</th>\n                 </tr>\n             </thead>\n             <tbody>\n-                @foreach ($partners as $partner)\n+                @foreach ($excursions as $excursion)\n                     <tr>\n-                        <td>{{ $partner->id }}</td>\n-                        <td>{{ $partner->name }}</td>\n-                        <td><a href=\"{{ $partner->link }}\" target=\"_blank\">{{ $partner->link }}</a></td>\n+                        <td>{{ $excursion->id }}</td>\n+                        <td>{{ $excursion->name }}</td>\n+                        <td>{{ $excursion->price }} €</td>\n+                        <td>{{ $excursion->price_increment }} €</td>\n+                        <td>{{ $excursion->abstract }}</td>\n+                        <td>{{ $excursion->description }}</td>\n+                        <td>{{ $excursion->created_at }}</td>\n+                        <td>{{ $excursion->updated_at }}</td>\n                         <td>\n-                            @if ($partner->images->count() > 0)\n-                                <small>{{ $partner->images->count() }} immagini caricate</small>\n+                            @if ($excursion->images->count() > 0)\n+                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n                             @else\n                                 <small>Nessuna immagine</small>\n                             @endif\n                         </td>\n-                        <td>{{ $partner->created_at }}</td>\n-                        <td>{{ $partner->updated_at }}</td>\n                         <td>\n-                            <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n-                                data-name=\"{{ $partner->name }}\"\n-                                data-link=\"{{ $partner->link }}\"\n-                                data-images=\"{{ $partner->images }}\">Modifica</button>\n-                            <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editExcursionModal\"\n+                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n+                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n                                 style=\"display:inline-block;\">\n                                 @csrf\n                                 @method('DELETE')\n                                 <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n@@ -73,99 +94,133 @@\n             </tbody>\n         </table>\n     </div>\n \n-    <!-- Modale per Modifica Partner -->\n-    <div class=\"modal fade\" id=\"editPartnerModal\" tabindex=\"-1\" aria-labelledby=\"editPartnerModalLabel\"\n+    <!-- Modale per Modifica Escursione -->\n+    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n         aria-hidden=\"true\">\n         <div class=\"modal-dialog\">\n             <div class=\"modal-content\">\n                 <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editPartnerModalLabel\">Modifica Partner</h5>\n+                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n                     <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                 </div>\n                 <div class=\"modal-body\">\n-                    <form id=\"editPartnerForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n                         @csrf\n                         @method('PUT')\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Partner</label>\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_link\" class=\"form-label\">Link</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\" required>\n+                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n+                                required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n+                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n+                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n+                                name=\"price_increment\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n+                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n+                        </div>\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n                             <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n                         </div>\n-                        <div id=\"edit_images_preview\" class=\"mb-3\">\n-                            <!-- Anteprime delle immagini caricate verranno inserite qui -->\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n                         </div>\n                         <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                     </form>\n                 </div>\n             </div>\n         </div>\n     </div>\n \n+    <!-- JavaScript per gestire il modale di modifica -->\n     <script>\n-        document.addEventListener('DOMContentLoaded', function() {\n-            var editPartnerModal = document.getElementById('editPartnerModal');\n-            editPartnerModal.addEventListener('show.bs.modal', function(event) {\n-                var button = event.relatedTarget;\n-                var id = button.getAttribute('data-id');\n-                var name = button.getAttribute('data-name');\n-                var link = button.getAttribute('data-link');\n-                var images = JSON.parse(button.getAttribute('data-images').replace(/&quot;/g, '\"'));\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n \n-                var modal = this;\n-                modal.querySelector('#edit_name').value = name;\n-                modal.querySelector('#edit_link').value = link;\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image', 'd-inline-block', 'position-relative', 'm-1');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\" class=\"img-thumbnail\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0 remove-image\" data-image-id=\"${image.id}\">×</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n \n-                var form = modal.querySelector('#editPartnerForm');\n-                form.action = '{{ url('partners') }}/' + id;\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n \n-                var previewContainer = modal.querySelector('#edit_images_preview');\n-                previewContainer.innerHTML = '';\n+                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n+                    const form = document.getElementById('editExcursionForm');\n+                    form.action = `/dashboard/excursions/${excursion.id}`;\n+                    form.querySelector('#edit_name').value = excursion.name;\n+                    form.querySelector('#edit_price').value = excursion.price;\n+                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n+                    form.querySelector('#edit_abstract').value = excursion.abstract;\n+                    form.querySelector('#edit_description').value = excursion.description;\n \n-                if (images.length > 0) {\n-                    images.forEach(function(image) {\n-                        var imgElement = document.createElement('div');\n-                        imgElement.className = 'd-inline-block position-relative';\n-                        imgElement.innerHTML = `\n-                            <img src=\"{{ Storage::url('') }}${image.path}\" alt=\"image\" width=\"100\" class=\"img-thumbnail m-1\">\n-                            <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0\"\n-                                onclick=\"deleteImage(${image.id}, this)\">×</button>\n-                        `;\n-                        previewContainer.appendChild(imgElement);\n-                    });\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(excursion.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById(\n+                        'editExcursionModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/dashboard/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error(\n+                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n+                                error);\n+                        });\n                 }\n             });\n+\n         });\n-\n-        function deleteImage(imageId, button) {\n-            if (confirm('Sei sicuro di voler eliminare questa immagine?')) {\n-                fetch('{{ url('images') }}/' + imageId, {\n-                    method: 'DELETE',\n-                    headers: {\n-                        'X-CSRF-TOKEN': '{{ csrf_token() }}',\n-                        'Content-Type': 'application/json'\n-                    }\n-                })\n-                .then(response => response.json())\n-                .then(data => {\n-                    if (data.success) {\n-                        button.parentElement.remove();\n-                    } else {\n-                        alert('Errore nell\\'eliminazione dell\\'immagine.');\n-                    }\n-                })\n-                .catch(error => {\n-                    console.error('Errore:', error);\n-                    alert('Errore nell\\'eliminazione dell\\'immagine.');\n-                });\n-            }\n-        }\n     </script>\n </x-dashboard-layout>\n"
                },
                {
                    "date": 1719228290836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,89 +1,68 @@\n <x-dashboard-layout>\n     <div class=\"container-fluid mt-5\">\n-        <h1>Gestione Escursioni</h1>\n+        <h1>Gestione Partner</h1>\n \n         @if (session('success'))\n             <div class=\"alert alert-success\">\n                 {{ session('success') }}\n             </div>\n         @endif\n \n-        <!-- Form per aggiungere una nuova escursione -->\n-        <form action=\"{{ route('excursions.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n+        <form action=\"{{ route('partners.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n             @csrf\n             <div class=\"row\">\n-                <div class=\"mb-3 col-8\">\n-                    <label for=\"name\" class=\"form-label\">Nome Escursione</label>\n+                <div class=\"mb-3 col-4\">\n+                    <label for=\"name\" class=\"form-label\">Nome Partner</label>\n                     <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                 </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price\" class=\"form-label\">Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price\" name=\"price\" required>\n+                <div class=\"mb-3 col-4\">\n+                    <label for=\"link\" class=\"form-label\">Link</label>\n+                    <input type=\"text\" class=\"form-control\" id=\"link\" name=\"link\" required>\n                 </div>\n-                <div class=\"mb-3 col-2\">\n-                    <label for=\"price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                    <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"price_increment\"\n-                        name=\"price_increment\" required>\n+                <div class=\"mb-3 col-4\">\n+                    <label for=\"images\" class=\"form-label\">Immagini</label>\n+                    <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n                 </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"abstract\" class=\"form-label\">Abstract</label>\n-                    <input type=\"text\" step=\"0.01\" class=\"form-control\" id=\"abstract\" name=\"abstract\" required>\n-                </div>\n-                <div class=\"mb-3 col-12\">\n-                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n-                    <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"5\" required></textarea>\n-                </div>\n             </div>\n-            <div class=\"mb-3\">\n-                <label for=\"images\" class=\"form-label\">Immagini</label>\n-                <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n-            </div>\n-            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Escursione</button>\n+            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Partner</button>\n         </form>\n-\n         <hr>\n-\n-        <!-- Tabella con tutte le escursioni -->\n-        <h2>Tutte le Escursioni</h2>\n+        <h2>Tutti i Partner</h2>\n         <table class=\"table\">\n             <thead>\n                 <tr>\n                     <th>#</th>\n                     <th>Nome</th>\n-                    <th>Prezzo</th>\n-                    <th>Incremento Prezzo</th>\n-                    <th>Abstract</th>\n-                    <th>Descrizione</th>\n+                    <th>Link</th>\n+                    <th>Immagini</th>\n                     <th>Data di aggiunta</th>\n                     <th>Data di modifica</th>\n-                    <th>Immagini</th>\n                     <th>Azione</th>\n                 </tr>\n             </thead>\n             <tbody>\n-                @foreach ($excursions as $excursion)\n+                @foreach ($partners as $partner)\n                     <tr>\n-                        <td>{{ $excursion->id }}</td>\n-                        <td>{{ $excursion->name }}</td>\n-                        <td>{{ $excursion->price }} €</td>\n-                        <td>{{ $excursion->price_increment }} €</td>\n-                        <td>{{ $excursion->abstract }}</td>\n-                        <td>{{ $excursion->description }}</td>\n-                        <td>{{ $excursion->created_at }}</td>\n-                        <td>{{ $excursion->updated_at }}</td>\n+                        <td>{{ $partner->id }}</td>\n+                        <td>{{ $partner->name }}</td>\n+                        <td><a href=\"{{ $partner->link }}\" target=\"_blank\">{{ $partner->link }}</a></td>\n                         <td>\n-                            @if ($excursion->images->count() > 0)\n-                                <small>{{ $excursion->images->count() }} immagini caricate</small>\n+                            @if ($partner->images->count() > 0)\n+                                <small>{{ $partner->images->count() }} immagini caricate</small>\n                             @else\n                                 <small>Nessuna immagine</small>\n                             @endif\n                         </td>\n+                        <td>{{ $partner->created_at }}</td>\n+                        <td>{{ $partner->updated_at }}</td>\n                         <td>\n-                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editExcursionModal\"\n-                                data-excursion=\"{{ json_encode($excursion) }}\">Modifica</button>\n-                            <form action=\"{{ route('excursions.destroy', $excursion) }}\" method=\"POST\"\n+                            <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n+                                data-name=\"{{ $partner->name }}\"\n+                                data-link=\"{{ $partner->link }}\"\n+                                data-images=\"{{ $partner->images }}\">Modifica</button>\n+                            <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n                                 style=\"display:inline-block;\">\n                                 @csrf\n                                 @method('DELETE')\n                                 <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n@@ -94,133 +73,99 @@\n             </tbody>\n         </table>\n     </div>\n \n-    <!-- Modale per Modifica Escursione -->\n-    <div class=\"modal fade\" id=\"editExcursionModal\" tabindex=\"-1\" aria-labelledby=\"editExcursionModalLabel\"\n+    <!-- Modale per Modifica Partner -->\n+    <div class=\"modal fade\" id=\"editPartnerModal\" tabindex=\"-1\" aria-labelledby=\"editPartnerModalLabel\"\n         aria-hidden=\"true\">\n         <div class=\"modal-dialog\">\n             <div class=\"modal-content\">\n                 <div class=\"modal-header\">\n-                    <h5 class=\"modal-title\" id=\"editExcursionModalLabel\">Modifica Escursione</h5>\n+                    <h5 class=\"modal-title\" id=\"editPartnerModalLabel\">Modifica Partner</h5>\n                     <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                 </div>\n                 <div class=\"modal-body\">\n-                    <form id=\"editExcursionForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n+                    <form id=\"editPartnerForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n                         @csrf\n                         @method('PUT')\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_name\" class=\"form-label\">Nome Escursione</label>\n+                            <label for=\"edit_name\" class=\"form-label\">Nome Partner</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_price\" class=\"form-label\">Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price\" name=\"price\"\n-                                required>\n+                            <label for=\"edit_link\" class=\"form-label\">Link</label>\n+                            <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_price_increment\" class=\"form-label\">Incremento Prezzo</label>\n-                            <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"edit_price_increment\"\n-                                name=\"price_increment\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_abstract\" class=\"form-label\">Abstract</label>\n-                            <input type=\"text\" class=\"form-control\" id=\"edit_abstract\" name=\"abstract\" required>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n-                            <textarea class=\"form-control\" id=\"edit_description\" name=\"description\" rows=\"5\" required></textarea>\n-                        </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n+                            <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n                             <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n                         </div>\n-                        <div class=\"mb-3\">\n-                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n-                            <div id=\"edit-current-images\">\n-                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n-                            </div>\n+                        <div id=\"edit_images_preview\" class=\"mb-3\">\n+                            <!-- Anteprime delle immagini caricate verranno inserite qui -->\n                         </div>\n                         <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                     </form>\n                 </div>\n             </div>\n         </div>\n     </div>\n \n-    <!-- JavaScript per gestire il modale di modifica -->\n     <script>\n-        document.addEventListener(\"DOMContentLoaded\", function() {\n-            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n-            function showCurrentImages(images) {\n-                const currentImagesDiv = document.getElementById('edit-current-images');\n-                currentImagesDiv.innerHTML = '';\n+        document.addEventListener('DOMContentLoaded', function() {\n+            var editPartnerModal = document.getElementById('editPartnerModal');\n+            editPartnerModal.addEventListener('show.bs.modal', function(event) {\n+                var button = event.relatedTarget;\n+                var id = button.getAttribute('data-id');\n+                var name = button.getAttribute('data-name');\n+                var link = button.getAttribute('data-link');\n+                var images = JSON.parse(button.getAttribute('data-images').replace(/&quot;/g, '\"'));\n \n-                images.forEach(image => {\n-                    const imgDiv = document.createElement('div');\n-                    imgDiv.classList.add('current-image', 'd-inline-block', 'position-relative', 'm-1');\n-                    imgDiv.innerHTML = `\n-                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\" class=\"img-thumbnail\">\n-                        <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0 remove-image\" data-image-id=\"${image.id}\">×</button>\n-                    `;\n-                    currentImagesDiv.appendChild(imgDiv);\n-                });\n-            }\n+                var modal = this;\n+                modal.querySelector('#edit_name').value = name;\n+                modal.querySelector('#edit_link').value = link;\n \n-            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n-            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n-                button.addEventListener('click', () => {\n-                    const excursion = JSON.parse(button.getAttribute('data-excursion'));\n+                var form = modal.querySelector('#editPartnerForm');\n+                form.action = '{{ url('partners') }}/' + id;\n \n-                    // Popola il form nel modale di modifica con i dati dell'escursione selezionata\n-                    const form = document.getElementById('editExcursionForm');\n-                    form.action = `/dashboard/excursions/${excursion.id}`;\n-                    form.querySelector('#edit_name').value = excursion.name;\n-                    form.querySelector('#edit_price').value = excursion.price;\n-                    form.querySelector('#edit_price_increment').value = excursion.price_increment;\n-                    form.querySelector('#edit_abstract').value = excursion.abstract;\n-                    form.querySelector('#edit_description').value = excursion.description;\n+                var previewContainer = modal.querySelector('#edit_images_preview');\n+                previewContainer.innerHTML = '';\n \n-                    // Mostra le immagini esistenti nel modale di modifica\n-                    showCurrentImages(excursion.images);\n-\n-                    // Mostra il modale di modifica\n-                    const modal = new bootstrap.Modal(document.getElementById(\n-                        'editExcursionModal'));\n-                    modal.show();\n-                });\n-            });\n-\n-            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n-            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n-                if (event.target.classList.contains('remove-image')) {\n-                    const imageId = event.target.getAttribute('data-image-id');\n-\n-                    // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/dashboard/images/${imageId}`, {\n-                            method: 'DELETE',\n-                            headers: {\n-                                'X-CSRF-TOKEN': '{{ csrf_token() }}', // Assicurati di includere il token CSRF\n-                            }\n-                        })\n-                        .then(response => response.json())\n-                        .then(data => {\n-                            if (data.success) {\n-                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n-                                event.target.closest('.current-image').remove();\n-                                // Aggiungi qui eventuali feedback visivi o logica aggiuntiva dopo l'eliminazione\n-                            } else {\n-                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n-                                console.error(data.error);\n-                            }\n-                        })\n-                        .catch(error => {\n-                            console.error(\n-                                'Si è verificato un errore durante l\\'eliminazione dell\\'immagine:',\n-                                error);\n-                        });\n+                if (images.length > 0) {\n+                    images.forEach(function(image) {\n+                        var imgElement = document.createElement('div');\n+                        imgElement.className = 'd-inline-block position-relative';\n+                        imgElement.innerHTML = `\n+                            <img src=\"{{ Storage::url('') }}${image.path}\" alt=\"image\" width=\"100\" class=\"img-thumbnail m-1\">\n+                            <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0\"\n+                                onclick=\"deleteImage(${image.id}, this)\">×</button>\n+                        `;\n+                        previewContainer.appendChild(imgElement);\n+                    });\n                 }\n             });\n+        });\n \n-        });\n+        function deleteImage(imageId, button) {\n+            if (confirm('Sei sicuro di voler eliminare questa immagine?')) {\n+                fetch('{{ url('images') }}/' + imageId, {\n+                    method: 'DELETE',\n+                    headers: {\n+                        'X-CSRF-TOKEN': '{{ csrf_token() }}',\n+                        'Content-Type': 'application/json'\n+                    }\n+                })\n+                .then(response => response.json())\n+                .then(data => {\n+                    if (data.success) {\n+                        button.parentElement.remove();\n+                    } else {\n+                        alert('Errore nell\\'eliminazione dell\\'immagine.');\n+                    }\n+                })\n+                .catch(error => {\n+                    console.error('Errore:', error);\n+                    alert('Errore nell\\'eliminazione dell\\'immagine.');\n+                });\n+            }\n+        }\n     </script>\n </x-dashboard-layout>\n"
                },
                {
                    "date": 1719228721826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,13 +55,11 @@\n                         </td>\n                         <td>{{ $partner->created_at }}</td>\n                         <td>{{ $partner->updated_at }}</td>\n                         <td>\n-                            <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n-                                data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n-                                data-name=\"{{ $partner->name }}\"\n-                                data-link=\"{{ $partner->link }}\"\n-                                data-images=\"{{ $partner->images }}\">Modifica</button>\n+                            <button class=\"btn btn-warning btn-sm edit-open-details-modal\" data-bs-toggle=\"modal\"\n+                                data-bs-target=\"#editPartnerModal\"\n+                                data-partner=\"{{ json_encode($partner) }}\">Modifica</button>\n                             <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n                                 style=\"display:inline-block;\">\n                                 @csrf\n                                 @method('DELETE')\n@@ -95,77 +93,89 @@\n                             <label for=\"edit_link\" class=\"form-label\">Link</label>\n                             <input type=\"text\" class=\"form-control\" id=\"edit_link\" name=\"link\" required>\n                         </div>\n                         <div class=\"mb-3\">\n-                            <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n+                            <label for=\"edit_images\" class=\"form-label\">Aggiungi nuove immagini</label>\n                             <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n                         </div>\n-                        <div id=\"edit_images_preview\" class=\"mb-3\">\n-                            <!-- Anteprime delle immagini caricate verranno inserite qui -->\n+                        <div class=\"mb-3\">\n+                            <label for=\"edit_current_images\" class=\"form-label\">Immagini Caricate</label>\n+                            <div id=\"edit-current-images\">\n+                                <!-- Anteprime delle immagini esistenti verranno aggiunte qui -->\n+                            </div>\n                         </div>\n                         <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                     </form>\n                 </div>\n             </div>\n         </div>\n     </div>\n \n+    <!-- JavaScript per gestire il modale di modifica -->\n     <script>\n-        document.addEventListener('DOMContentLoaded', function() {\n-            var editPartnerModal = document.getElementById('editPartnerModal');\n-            editPartnerModal.addEventListener('show.bs.modal', function(event) {\n-                var button = event.relatedTarget;\n-                var id = button.getAttribute('data-id');\n-                var name = button.getAttribute('data-name');\n-                var link = button.getAttribute('data-link');\n-                var images = JSON.parse(button.getAttribute('data-images').replace(/&quot;/g, '\"'));\n+        document.addEventListener(\"DOMContentLoaded\", function() {\n+            // Funzione per mostrare le anteprime delle immagini esistenti nel modale di modifica\n+            function showCurrentImages(images) {\n+                const currentImagesDiv = document.getElementById('edit-current-images');\n+                currentImagesDiv.innerHTML = '';\n \n-                var modal = this;\n-                modal.querySelector('#edit_name').value = name;\n-                modal.querySelector('#edit_link').value = link;\n+                images.forEach(image => {\n+                    const imgDiv = document.createElement('div');\n+                    imgDiv.classList.add('current-image');\n+                    imgDiv.innerHTML = `\n+                        <img src=\"{{ asset('storage') }}/${image.path}\" alt=\"Immagine\" width=\"100\" class=\"img-thumbnail m-1\">\n+                        <button type=\"button\" class=\"btn btn-danger btn-sm remove-image\" data-image-id=\"${image.id}\">Elimina</button>\n+                    `;\n+                    currentImagesDiv.appendChild(imgDiv);\n+                });\n+            }\n \n-                var form = modal.querySelector('#editPartnerForm');\n-                form.action = '{{ url('partners') }}/' + id;\n+            // Aggiungi evento al click dei pulsanti \"Modifica\" per popolare il modale\n+            document.querySelectorAll('.edit-open-details-modal').forEach(button => {\n+                button.addEventListener('click', () => {\n+                    const partner = JSON.parse(button.getAttribute('data-partner'));\n \n-                var previewContainer = modal.querySelector('#edit_images_preview');\n-                previewContainer.innerHTML = '';\n+                    // Popola il form nel modale di modifica con i dati del partner selezionato\n+                    const form = document.getElementById('editPartnerForm');\n+                    form.action = `/partners/${partner.id}`;\n+                    form.querySelector('#edit_name').value = partner.name;\n+                    form.querySelector('#edit_link').value = partner.link;\n \n-                if (images.length > 0) {\n-                    images.forEach(function(image) {\n-                        var imgElement = document.createElement('div');\n-                        imgElement.className = 'd-inline-block position-relative';\n-                        imgElement.innerHTML = `\n-                            <img src=\"{{ Storage::url('') }}${image.path}\" alt=\"image\" width=\"100\" class=\"img-thumbnail m-1\">\n-                            <button type=\"button\" class=\"btn btn-danger btn-sm position-absolute top-0 end-0\"\n-                                onclick=\"deleteImage(${image.id}, this)\">×</button>\n-                        `;\n-                        previewContainer.appendChild(imgElement);\n-                    });\n+                    // Mostra le immagini esistenti nel modale di modifica\n+                    showCurrentImages(partner.images);\n+\n+                    // Mostra il modale di modifica\n+                    const modal = new bootstrap.Modal(document.getElementById('editPartnerModal'));\n+                    modal.show();\n+                });\n+            });\n+\n+            // Gestione del click sul pulsante \"Elimina\" immagine nel modale di modifica\n+            document.getElementById('edit-current-images').addEventListener('click', (event) => {\n+                if (event.target.classList.contains('remove-image')) {\n+                    const imageId = event.target.getAttribute('data-image-id');\n+\n+                    // Invia una richiesta DELETE al server per eliminare l'immagine\n+                    fetch(`/images/${imageId}`, {\n+                            method: 'DELETE',\n+                            headers: {\n+                                'X-CSRF-TOKEN': '{{ csrf_token() }}',\n+                            }\n+                        })\n+                        .then(response => response.json())\n+                        .then(data => {\n+                            if (data.success) {\n+                                // Rimuovi visivamente l'anteprima dell'immagine eliminata\n+                                event.target.closest('.current-image').remove();\n+                            } else {\n+                                // Gestisci errori o situazioni in cui l'eliminazione non è riuscita\n+                                console.error(data.error);\n+                            }\n+                        })\n+                        .catch(error => {\n+                            console.error('Errore durante l\\'eliminazione dell\\'immagine:', error);\n+                        });\n                 }\n             });\n         });\n-\n-        function deleteImage(imageId, button) {\n-            if (confirm('Sei sicuro di voler eliminare questa immagine?')) {\n-                fetch('{{ url('images') }}/' + imageId, {\n-                    method: 'DELETE',\n-                    headers: {\n-                        'X-CSRF-TOKEN': '{{ csrf_token() }}',\n-                        'Content-Type': 'application/json'\n-                    }\n-                })\n-                .then(response => response.json())\n-                .then(data => {\n-                    if (data.success) {\n-                        button.parentElement.remove();\n-                    } else {\n-                        alert('Errore nell\\'eliminazione dell\\'immagine.');\n-                    }\n-                })\n-                .catch(error => {\n-                    console.error('Errore:', error);\n-                    alert('Errore nell\\'eliminazione dell\\'immagine.');\n-                });\n-            }\n-        }\n     </script>\n </x-dashboard-layout>\n"
                },
                {
                    "date": 1719229227943,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,9 +154,9 @@\n                 if (event.target.classList.contains('remove-image')) {\n                     const imageId = event.target.getAttribute('data-image-id');\n \n                     // Invia una richiesta DELETE al server per eliminare l'immagine\n-                    fetch(`/images/${imageId}`, {\n+                    fetch(`/dashboard/images/${imageId}`, {\n                             method: 'DELETE',\n                             headers: {\n                                 'X-CSRF-TOKEN': '{{ csrf_token() }}',\n                             }\n"
                },
                {
                    "date": 1719229277756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n                     const partner = JSON.parse(button.getAttribute('data-partner'));\n \n                     // Popola il form nel modale di modifica con i dati del partner selezionato\n                     const form = document.getElementById('editPartnerForm');\n-                    form.action = `/partners/${partner.id}`;\n+                    form.action = `//partners/${partner.id}`;\n                     form.querySelector('#edit_name').value = partner.name;\n                     form.querySelector('#edit_link').value = partner.link;\n \n                     // Mostra le immagini esistenti nel modale di modifica\n"
                }
            ],
            "date": 1719227181506,
            "name": "Commit-0",
            "content": "<x-dashboard-layout>\n    <div class=\"container-fluid mt-5\">\n        <h1>Gestione Partner</h1>\n\n        @if (session('success'))\n            <div class=\"alert alert-success\">\n                {{ session('success') }}\n            </div>\n        @endif\n\n        <form action=\"{{ route('partners.store') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n            @csrf\n            <div class=\"row\">\n                <div class=\"mb-3 col-4\">\n                    <label for=\"name\" class=\"form-label\">Nome Partner</label>\n                    <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" required>\n                </div>\n                <div class=\"mb-3 col-4\">\n                    <label for=\"description\" class=\"form-label\">Descrizione</label>\n                    <input type=\"text\" class=\"form-control\" id=\"description\" name=\"description\" required>\n                </div>\n                <div class=\"mb-3 col-4\">\n                    <label for=\"images\" class=\"form-label\">Immagini</label>\n                    <input type=\"file\" class=\"form-control\" id=\"images\" name=\"images[]\" multiple>\n                </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Aggiungi Partner</button>\n        </form>\n        <hr>\n        <h2>Tutti i Partner</h2>\n        <table class=\"table\">\n            <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Nome</th>\n                    <th>Descrizione</th>\n                    <th>Immagini</th>\n                    <th>Data di aggiunta</th>\n                    <th>Data di modifica</th>\n                    <th>Azione</th>\n                </tr>\n            </thead>\n            <tbody>\n                @foreach ($partners as $partner)\n                    <tr>\n                        <td>{{ $partner->id }}</td>\n                        <td>{{ $partner->name }}</td>\n                        <td>{{ $partner->description }}</td>\n                        <td>\n                            @foreach ($partner->images as $image)\n                                <img src=\"{{ Storage::url($image->path) }}\" alt=\"image\" width=\"50\" height=\"50\">\n                            @endforeach\n                        </td>\n                        <td>{{ $partner->created_at }}</td>\n                        <td>{{ $partner->updated_at }}</td>\n                        <td>\n                            <button class=\"btn btn-warning btn-sm\" data-bs-toggle=\"modal\"\n                                data-bs-target=\"#editPartnerModal\" data-id=\"{{ $partner->id }}\"\n                                data-name=\"{{ $partner->name }}\" data-description=\"{{ $partner->description }}\">Modifica</button>\n                            <form action=\"{{ route('partners.destroy', $partner) }}\" method=\"POST\"\n                                style=\"display:inline-block;\">\n                                @csrf\n                                @method('DELETE')\n                                <button type=\"submit\" class=\"btn btn-danger btn-sm\">Elimina</button>\n                            </form>\n                        </td>\n                    </tr>\n                @endforeach\n            </tbody>\n        </table>\n    </div>\n\n    <!-- Modale per Modifica Partner -->\n    <div class=\"modal fade\" id=\"editPartnerModal\" tabindex=\"-1\" aria-labelledby=\"editPartnerModalLabel\"\n        aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\" id=\"editPartnerModalLabel\">Modifica Partner</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                    <form id=\"editPartnerForm\" action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n                        @csrf\n                        @method('PUT')\n                        <div class=\"mb-3\">\n                            <label for=\"edit_name\" class=\"form-label\">Nome Partner</label>\n                            <input type=\"text\" class=\"form-control\" id=\"edit_name\" name=\"name\" required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_description\" class=\"form-label\">Descrizione</label>\n                            <input type=\"text\" class=\"form-control\" id=\"edit_description\" name=\"description\" required>\n                        </div>\n                        <div class=\"mb-3\">\n                            <label for=\"edit_images\" class=\"form-label\">Immagini</label>\n                            <input type=\"file\" class=\"form-control\" id=\"edit_images\" name=\"images[]\" multiple>\n                        </div>\n                        <button type=\"submit\" class=\"btn btn-primary\">Salva Modifiche</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            var editPartnerModal = document.getElementById('editPartnerModal');\n            editPartnerModal.addEventListener('show.bs.modal', function(event) {\n                var button = event.relatedTarget;\n                var id = button.getAttribute('data-id');\n                var name = button.getAttribute('data-name');\n                var description = button.getAttribute('data-description');\n\n                var modal = this;\n                modal.querySelector('#edit_name').value = name;\n                modal.querySelector('#edit_description').value = description;\n\n                var form = modal.querySelector('#editPartnerForm');\n                form.action = '{{ url(\"dashboard/partners\") }}/' + id;\n            });\n        });\n    </script>\n</x-dashboard-layout>\n"
        }
    ]
}